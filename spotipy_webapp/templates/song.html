{% extends 'base.html' %}
{% block content %}
    <p>
    <center><h1>{{song['name']}}</h1></center>
    <div class="flex-container-song">
        <div class='flex-child-chart'>        
            <div id='chart' style="width:1300;height:650;">
            </div>
            <br>
            <div class='flex-chart-text'>
                If you are unfamiliar with Spotify's song features, click <a href='https://developer.spotify.com/documentation/web-api/reference/#category-tracks'>here</a> and check out the documentation for "AudioFeaturesObject." 
                Please note that these values were standardized to be in a range 0-1, so the numerical representations for items not already on that scale are different here. 
                However, the relationships in the docs hold up and this visualization tells compares your song to the 40,000 song sample described in the about page. 
                This visualization will tell you if your song exhibits abnormal levels of certain characteristics.
            </div>
        </div>
        <div class='flex-container-nested-song'>
            <div class='flex-song'>
                <img src="{{song.album.images[0]['url']}}" style="width:400;height:400;">
            </div>
            <div class='flex-song'>
                <h2>Artists</h2>
                <table>
                    {% for s in song.artists %}
                    <tr>
                        <td>{{s.name}}</td>
                    </tr>
                    {% endfor %}
                </table>
                <h2>Genres</h2>
                <table>
                        {% if genres %}
                        {% for genre in genres %}
                    <tr>
                        <td>{{genre}}</td>
                        <td></td>
                    </tr>
                    {% endfor %}

                    {% else %}
                    Spotify has no genre information for this song. <br>
                    Please try a different song or come back later! <br>
                    {% endif %}
            
                </table>
            </div>
            <br>
            <center>
            <div class='flex-child-right'></div>
            <h2><a href="{{ url_for('lyrics_tab', id=song.id) }}" class='btn-primary'>Go to Lyric Analysis</a></h2>
            </div>
            </center>
        </div>
    </div>
</p>

    <script src="https://cdn.plot.ly/plotly-2.2.0.min.js"></script>
    <script type="text/javascript">
    var data = {{graph | safe}};
    Plotly.newPlot('chart', data,{});
    </script>

{% endblock %}